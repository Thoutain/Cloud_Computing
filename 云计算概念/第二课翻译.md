#### 云是一个分布式系统

如您所知，本课程的标题是云计算概念。 

然而，本课程的主要部分将被花费 

讨论分布式系统概念。

从 ::18 开始播放视频并学习脚本0:18

那么云和分布式系统之间是什么关系呢？ 

在本次讲座和 

下一个，我认为云实际上是一个分布式系统。

从 ::29 开始播放视频并学习脚本0:29

所以一个云由数百到数千台机器组成 

数据中心侧收集在一个综合中心。 

我们称之为服务器端。 

在客户端可能有数千到数百万甚至更多 

访问由这些服务器托管的服务的机器。 

也许是网页，也许是网站，也许是正在存储的对象，以及 

也许各种不同的服务。 

所以这是在客户端。 

服务器端数据中心端的服务器通信 

彼此之间。 

所以那里有沟通。 

当然，客户端直接与服务器通信。 

每个客户端可以与一个或多个服务器通信。 

例如，每次您访问您的 Facebook 个人资料时， 

您的客户端进程，无论您运行的是哪个浏览器 

Facebook 客户端将访问多个 Facebook 服务器。 

一些用于照片，一些用于个人资料，一些用于墙壁，等等。

从 :1:24 开始播放视频并学习脚本1:24

当然，客户端也可以相互通信。 

当然，这也是在云中发生的事情。

从 :1:32 开始播放视频并学习脚本1:32

现在我描述的所有这些通信 

意味着云实际上是一个分布式系统。 

服务器之间相互通信这一事实意味着， 

这是一个分布式系统，由许多不同的服务器组成，发送和 

彼此之间接收消息。 

我们称之为集群。 

集群是机器的集合

从 :1:51 开始播放视频并学习脚本1:51

通过网络相互通信。 

与服务器通信的客户端也构成了一个分布式系统。 

一个非常大规模的分布式系统。 

客户端相互通信，例如在对等系统中 

Bertard 也意味着是一个非常大规模的分布式系统。 

所以我所描述的所有这些不同的方面 

云也是分布式系统的一个方面。

从 :2:15 开始播放视频并学习脚本2:15

事实上，如果你还记得上一堂课，我们讨论了四种不同的 

云的特点， 

所有这些特性实际上也是分布式系统的特性。 

事实上，你在云中有很多服务器， 

大规模，意味着这是一个分布式系统。 

您可以在任何地方访问多个服务器的事实，按需性质 

云，这再次意味着这也是分布式系统的一个特性。 

这意味着云是一种特殊的分布式系统。

从 :2:46 开始播放视频并学习脚本2:46

数据及其性质。 

当您有大量数据时，您需要将许多不同的机器集群起来进行存储 

数据，这又意味着分布式系统。 

当然还有今天存在的 Hadoop/Mapreduce 编程范式， 

NoSQL 存储系统。 

所有这些都需要集群。 

所有这些都需要许多不同的机器相互通信。

从 :3:6 开始播放视频并学习脚本3:06

所以我本质上说的是云是一种特殊的分布式 

系统，实际上云是分布式系统的最新昵称。 

您在上一课中已经看到的以前的昵称 

包括点对点系统、网格、集群、 

当我们看到数据处理行业时，还有分时计算机。 

所有这些都是分布式系统，所以每一个都是一种特殊的或 

一类特殊的分布式系统，云也是，云也不例外。

从 :3:37 开始播放视频并学习脚本3:37

所以昵称来来去去 各种各样的 

分布式系统的类别来来去去，但是 

分布式系统的核心概念保持不变。 

而这些核心概念十年又十年继续被使用。 

作为示例，您将在本课程后面学习的 Lamport 时间戳是 

早在 1970 年代和 80 年代就发明了，但它们今天仍在继续使用 

几乎所有今天实施的云和分布式系统。 

它们是一个非常核心的概念，这就是为什么了解它对我们很重要。 

这就是为什么这门课程真正是关于这些分布式系统概念的。 

我们不想仅限于云，但 

实际上是想研究分布式系统背后的核心概念。 

不仅仅是今天的云计算系统。 

但是过去已经存在了几十年的系统，以及 

这将在未来几十年持续存在。 

比如几年后，可能会有一个新的昵称， 

新一代分布式系统。 

但是，核心概念可能会保持不变，并且 

它们将继续在实际系统中使用。 

这就是我们在本课程中关注和研究这些核心概念的原因。

从 :4:41 开始播放视频并学习脚本4:41

所以我们的下一个目标将是尝试定义术语分布式系统。 

我们将在下一讲中做到这一点。

#### 什么是分布式系统
在本讲座中，我们将尝试定义术语分布式系统。 这不会是一个完美的定义，但它将是一个适用于的定义 我们在这门课上。 在我们这样做之前，让我们退后一步，定义一个不同但 相关术语即操作系统。 什么是操作系统？ 好吧，如果您使用过机器，如果您使用过设备，无论是平板电脑还是 一部智能手机，无论是笔记本电脑、计算机还是服务器，所有这些设备， 这些设备中的每一个都运行一个操作系统，也称为 OS。 因此，如果您使用过计算机，那么您就使用过操作系统。 操作系统在设备上运行，并且 它管理设备的不同组件。
从 ::44 开始播放视频并学习脚本0:44
因此，在我们定义术语操作系统之前， 让我们举一些操作系统的例子。 这里有一些名称，一些用于大型设备的操作系统包括 Linux、Mac OS X。 当然，它有许多不同的版本。 Windows，当然还有很多不同的版本。 以及 Unix 和 FreeBSD。 而且有很多， 许多用于大型设备的操作系统示例，我没有在此列出。 对于手持设备和平板电脑等小型设备，您有操作系统 比如谷歌的安卓，苹果的 iOS，TinyOS， 它在小型传感器节点上运行，您将在本课程稍后看到，并且， 当然，还有很多其他的小型操作系统，我没有在这里命名。
从 :1:23 开始播放视频并学习脚本1:23
现在让我们尝试定义术语操作系统。 在我们跳到一些众所周知的定义之前， 让我们试着总结一下我们对操作系统的了解。 操作系统本质上是为硬件提供用户界面。 您的计算机，任何设备，任何计算机，都由多个设备组成。 例如，您的计算机由键盘、鼠标、 一个显示器，一个硬盘，也许是多个硬盘。
从 :1:50 开始播放视频并学习脚本1:50
当然，还有 CPU 和内存，还有 许多其他外围设备连接到主板。 所有这些硬件部分都需要管理。 这些是由称为操作系统的软件管理的。 操作系统运行一段特殊的代码 连接到它的每个设备。 这段代码称为设备驱动程序。
从 :2:10 开始播放视频并学习脚本2:10
因此，本质上，作为用户，您不需要直接与这些设备交互。 作为一个用户，我们认为你知道，我点击鼠标是非常罕见的，并且 现在我需要担心从鼠标发送到 CPU 的消息， 所有这些都由操作系统负责。 操作系统还提供抽象，用于 例如，如果你存储你的一段代码，你很少会想到 嘿，这段代码如何作为块存储在磁盘上。 您正在考虑文件，您正在考虑目录或文件夹。 当你运行你的代码时，你会认为程序是作为进程启动的。 您没有考虑它在 CPU 上的何处运行？ 这在哪里存储内存？ 等等等等。 这些抽象是由操作系统提供给您的。 所以本质上操作系统抽象出了硬件特定的功能和 向用户提供用户可以理解和使用的功能。 操作系统当然必须管理这些不同的资源 为...负责。 哪些进程在 CPU 上运行， 在硬盘驱动器上访问哪些文件等等。 当然操作系统也是一种通信手段，无论是发送还是 接收电子邮件或是否正在访问网络。 或者只是在分布式系统中进行通信。
从 :3:20 开始播放视频并学习脚本3:20
这是免费在线计算词典中对操作系统的定义， 也称为 FOLDOC。 FOLDOC 将操作系统定义为处理 与外围硬件的接口、调度任务、分配存储以及 当没有应用程序运行时，向用户提供一个默认界面。 举例来说，当你启动你的机器时，上面没有任何东西在运行， 操作系统正在其上运行，因此它会占用 CPU。 我不会讨论这个定义的其余部分。 您可以通过在此处暂停视频来阅读它，或者 转到在线 FOLDOC 页面。 但本质上这个定义似乎抓住了我们所说的特征 上一张幻灯片中的操作系统也是如此。
从 :4: 开始播放视频并学习脚本4:00
让我们尝试重复相同的练习，但使用术语分布式系统。 让我们举一些分布式系统的例子。 以下是一些示例，单个客户端机器与服务器通信，用于 例如，如果您了解 NFS，如果您使用过 NFS，网络文件系统。 单个客户端可以与单个服务器通信， 那是一个分布式系统。 一个 BitTorrent，其中 BitTorrent 是一个点对点覆盖，它由 数以百万计的客户相互通信 又是分布式系统的另一个例子。 拥有许多服务器、客户端和路由器的 Internet 以及 相互通信的交换机是分布式系统的另一个例子 以及您拥有服务器和客户端之间进行通信的网络 彼此是分布式系统的一个例子。 我们将在课程后面学习的 Hadoop 和 数据中心都是分布式系统的例子。
从 :4:45 开始播放视频并学习脚本4:45
什么不是分布式系统的例子？ 好吧，如果你有一群人，比如说在一个聚会上， 彼此交互，这不是分布式系统。 至少，那不是我们要研究的那种分布式系统 在本课程中。 我的意思是他们可能很有趣，当然，在其他课程中，但是 不在本课程中。 一台未连接到网络且仅运行一个进程的独立机器 这又是一个非分布式系统的例子。
从 :5:10 开始播放视频并学习脚本5:10
鸟儿在那里互相交流， 这又是一个非分布式系统的例子。 我猜这是生物学家研究的一个有趣的社会现象。 但不是在计算机科学课程中。
从 :5:24 开始播放视频并学习脚本5:24
那么有没有一个好的定义呢？ 好吧 FOLDOC，免费的在线计算词典对我们的操作系统很有帮助 定义，所以让我们回到 FOLDOC 对分布式系统的定义。
从 :5:34 开始播放视频并学习脚本5:34
FOLDOC 说分布式系统是自动机的集合， 当它说自动化时，它本质上是指程序，其分布是 对用户透明，以便系统显示为一台本地机器。 它说本质上
从 :5:47 开始播放视频并学习脚本5:47
机器的集合显示为一台机器而不是多台机器 给正在使用分布式系统的用户。 这与网络相反， 当用户知道有几台机器及其位置时， 存储复制、负载平衡和功能不透明。 分布式系统通常使用某种客户端-服务器组织。
从 :6:8 开始播放视频并学习脚本6:08
所以这是分布式系统的后续定义。 我声称这个定义是错误的。
从 :6:14 开始播放视频并学习脚本6:14
这只是错误的。 事实上，这个定义有两个错误。 第一个错误是定义说在分布式系统中， 一组机器显示为一台本地机器。 但如果这是真的，那么网络就不是分布式系统。 例如，在网络上， 通常情况下，网站 A 可能会正常运行，而另一个网站 B 可能会关闭。 在不同的时间点，网站 B 启动，而网站 A 关闭。 永远不会出现 A 和 B 都上涨而 A 和 B 都下跌的情况。 所以基本上这两个 Web 服务器不会显示为一台本地机器，但 网络是一个分布式系统。
从 :6:49 开始播放视频并学习脚本6:49
这个定义中的第二个错误是最后一句话说 分布式系统通常使用某种客户端-服务器组织。 这并非总是如此。 像 BitTorrent 这样的点对点系统，以及之前的许多其他点对点系统， 很大程度上依赖于客户之间的沟通。 这就是为什么它们被称为对等系统。 除了一些非常小的功能外，它们不依赖于服务器。 基本上没有服务器， 这些系统将继续正常运作。
从 :7:17 开始播放视频并学习脚本7:17
所以不幸的是，公式定义对我们不起作用。 好吧，让我们看看一些定义教科书。 Andrew Tanenbaum 在他的分布式系统教科书中 将其定义为独立计算机的集合 对系统用户来说是一台计算机。 同样，同样的问题，我们在上一张幻灯片中看到的同样的错误出现在 这个定义也是如此，所以它对我们不起作用。 Michael Schroeder，另一位著名的分布式系统研究员定义了 一个分布式系统，即多台计算机一起做某事。 因此，分布式系统具有三个主要特征： 多台计算机、互连和共享状态。
从 :7:55 开始播放视频并学习脚本7:55
这个定义更接近我们想要的，但它缺少一些组件。 例如，它不会谈论服务器或客户端失败，等等 这有点令人担忧。 所以这个定义对我们也不起作用。
从 :8:7 开始播放视频并学习脚本8:07
所以所有这些定义都很短，看起来对我们来说不够用 主要是因为我们对分布式系统的内部感兴趣。 我们不想表现得像分布式系统的用户， 我们想深入了解。 我们想进入分布式系统内部，并研究在那里运行的算法。 你如何设计分布式系统， 你如何实现分布式系统，如何维护，以及 当然，分布式系统的真正特征是什么？ 正如你所看到的，正如我之前提到的，有 有一些例子，当你看到它时，你知道它不是一个分布式系统。 人类或 鸟类之间相互交互，一个未连接到网络的独立机器。 所以当我们看到它时我们就知道它，这在引用中被很好地捕捉到 波特·斯图尔特大法官在 1964 年的一个案件中说，基本上， 当我看到它时我知道它，但可能很难定义它。 所以我们要冒险提出定义， 这是我的工作定义。 这将适用于此版本的课程。 所以一个分布式系统，这个定义说， 是一个分布式系统是一个实体的集合，这些实体中的每一个都是 自主的、可编程的、异步的和容易出错的， 并且这些实体通过不可靠的通信介质进行通信。 让我通过这个定义并在这里解释每个目标。 实体本质上是过程。
从 :9:27 开始播放视频并学习脚本9:27
所以每个实体都是在某个设备上运行的一个进程。 每个实体都是自治的，这意味着它是独立的。 如果留给自己的设备，双关语意为，如果留给自己的设备，它会运行得很好。 实体是可编程的。 当然，您已经编写了在下面运行的代码，并且 在这些过程中，所以它们是可编程的。
从 :9:50 开始播放视频并学习脚本9:50
请注意，这是消除人类或 鸟类作为分布式系统相互交互。 你无法真正编程人类或鸟类之间的互动，所以 这就是为什么那些不是分布式系统的原因。 异步非常重要，这实质上意味着每个进程或 每个实体根据自己的时钟运行，这些时钟是不同的 实体是进程，彼此不同步。 他们并不总是显示彼此相同的时间 在本课程的后面，您将看到越来越多的此类内容。 最后是这些实体容易失败， 每个实体都可能在任何时间点任意崩溃。
从 :10:26 开始播放视频并学习脚本10:26
例如，在任何颜色，在某个时间点。 这些实体通过不可靠的通信媒介进行通信 它们通过彼此发送和接收消息。 但是，这些正在发送的消息可能会被完全丢弃，或者 它们可能会被延迟非常长的时间。 好的，这就是我对分布式系统的定义。
从 :10:49 开始播放视频并学习脚本10:49
所以，实体，当我说实体时，我的意思是设备上的一个过程，是吗？ 小型个人电脑或个人电脑或笔记本电脑，无论是平板电脑还是小型传感器模式。 并且通信介质可以是有线网络或无线网络或 它们的某种组合。
从 :11:8 开始播放视频并学习脚本11:08
所以，再一次， 可编程目标消除了人与人之间的互动。 异步目标将分布式系统与并行系统区分开来。 并行系统包括多处理器系统和超级计算机。 但本质上，非常多的处理器共享同一个主板。 它们通过紧密耦合的网络相互通信，并且 他们都有一个同步时钟。 因此，所有处理器在所有时间点都显示相同的时钟。 分布式系统与此大不相同， 分布式系统具有异步性，这意味着时钟是不同步的。 这就是为什么分布式系统更难为其设计算法，并且 为。
从 :11:48 开始播放视频并学习脚本11:48
您可能还记得在迎新讲座中看到的一个过程。 一个充满血腥细节的过程，包括它的代码、它的堆栈、 它的程序计数器，指向代码当前执行的位置，堆和 寄存器和一大堆其他东西。 现在进程是分布式系统中的一个重要实体。 事实上，正如我们所说，分布式系统由许多进程组成。 在这个例子中，我有一个三个进程 P1、P2、P3 但是 分布式系统中可能涉及数千个进程。 您在下面有一个不可靠的通信网络。 在本课程中，我们对网络的内部不感兴趣， 事实上，我们能够通过这个网络发送和接收消息。 所以 P1 可能能够向 P3 发送消息 m，然后该消息被传递 在某个时间点到 P3，然后接收消息。
从 :12:38 开始播放视频并学习脚本12:38
好的，这基本上就是我们所看到的分布式系统，多个 进程通过相互发送和接收消息进行通信。 当您想到分布式系统用于工作目的时 这门课程，这就是你真正需要考虑的， 处理，彼此之间发送和接收消息。
从 :12:57 开始播放视频并学习脚本12:57
需要注意的是，这只是适用于本课程的有效定义。 您可以随意提出自己的分布式系统定义。 我特别鼓励你在看过很多之后尝试这个练习 您在本课程中看到的许多分布式系统示例。 所以在本课程结束时尝试一下。
从 :13:16 开始播放视频并学习脚本13:16
所以，给定这个定义，有很多有趣的问题 像我们、你和我这样的分布式系统人。 点对点系统，我们将研究许多，云基础设施， 我们将看到其中的一些，云存储系统，软件系统， 键值存储和 NoSQL，我们也会看到其中的一些，Cassandra 和 HBase。 云编程，包括 MapReduce、Storm 和 Pregel。 您很快就会看到其中的一些内容。
从 :13:40 开始播放视频并学习脚本13:40
协调，包括共识。 Paxos、领导者选举、快照等协议。 当然，管理这些与每个交互的客户端和服务器 其他通过并发控制技术和应用程序控制技术。 我在这张幻灯片上列出的所有这些主题都与本课程相关，并且 当我们在本课程的第一部分和 云计算概念的第二部分。 当我们解决这些问题时，我们需要意识到几个特征是真实的 在下面的分布式系统中，我们需要针对这些功能进行设计。 失败不再是例外而是常态。 正如我们之前讨论过的，当您的系统规模扩大时， 失败变得非常非常普遍。 当您拥有数千台机器和数 TB 的数据时， 我们需要能够扩展您为分布式系统设计的任何算法， 这需要能够很好地扩展到许多， 许多机器处理大量数据。 异步再次是您必须应对的一个非常重要的挑战 在设计分布式算法时。 不同进程的时钟不同步的事实 意味着您将在时钟之间产生差异，时钟偏差。 您还会有时钟彼此分开，这称为时钟漂移。 稍后您将在课程中再次看到这些内容。 当然，并发是我们必须处理的事情。 数以千计的机器访问相同的数据， 相互作用，必然会产生风险条件和 必然会造成数据可能不一致的情况。 所以我们必须小心确保数据保持一致，即使 机器彼此交互并访问相同的数据。
从 :15:14 开始播放视频并学习脚本15:14
所以在接下来的几周里，我们将看到分布式的几个核心概念 系统。 下周你会看到八卦和会员资格。 然后我们也会看到分布式哈希表， 这是点对点系统的重要组成部分。 我们将在实际使用这些核心概念时交替使用核心概念 系统，所以 当我们看到分布式哈希表时，我们也会看到它们在对等系统中。 我们还看到了这些构建块中的一些如何用于键值存储和 NoSQL 存储系统。 例如这些 NoSQL 存储系统使用分布式哈希表， 他们使用，八卦，他们使用会员资格。 这就是为什么你首先学习概念 然后我们看看它们是如何在实际系​​统中使用的。