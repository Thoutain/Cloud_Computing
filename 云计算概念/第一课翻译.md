#### 第一周介绍

感谢您加入我的云计算概念之旅。 在课程的第一周，我们将首先看到介绍 到云。 什么是云，它们为何进化，以及之前的历史 分布式系统的产生导致了今天云的出现。 因此，在此我们将看到云计算的许多先驱。 接下来我们将了解为什么这门课程真正是关于分布式系统的。 尽管我们正在开始云计算，但其背后的概念 云计算系统实际上是分布式系统概念。 我们将看到为什么云实际上是分布式系统，以及 我们还将尝试定义术语分布式系统。 我们将开始看到用于分布式系统的示例 今天的云。 我们将看到的第一个示例是 Mapreduce 和开源 Apache Hadoop。 我们将看到范式是什么，它是如何工作的。 我们将看到许多使用 Mapreduce 的示例，我们将深入研究 了解调度在 Mapreduce 和 Hadoop 中是如何工作的。

#### why clouds？

欢迎。 在这个，呃，系列讲座中，呃，我们会看到， 呃，云计算的介绍， 我们将重点放在， 呃，区别的方面， 呃，前几代的云计算 呃，分布式，呃，系统。

所以，呃，首先 有很多关于云计算的炒作。 呃，几个，呃，预测机构， 呃，预测不同的市场趋势，呃，市场 曾经说过云计算很大 它只会增长，呃，也许是指数级增长。 Gartner，这是最，呃， 流行的预测公司， 表示 2009 年云计算收入 到 2013 年将超过 1500 亿美元， 并且它将代表 到 2015 年，占 IT 支出的很大一部分。 IDC 在 2009 年说，呃， 在，呃，那个，呃，未来 5 年，呃， IT 云服务支出将增加两倍 并将达到数百亿美元。 Forrester 表示云计算将走向 到 2020 年，一个产业将达到 2400 亿美元。 这不仅仅是在工业领域。 几个政府 也开始依赖云计算， 包括建立的 fedbizopps.gov，呃， 很多，呃，几年前由联邦，呃，政府设立的。

所以显然有很多炒作， 呃，但问题是云计算到底是什么？ 嗯，有很多云提供商， 我敢肯定，呃，你们中的许多人，呃，可能听说过。 最受欢迎的云提供商之一是 AWS， 或亚马逊网络服务。 还有其他的，呃，这里的供应商， 微软 Azure，呃，谷歌计算引擎， 还有一大堆其他公司， 包括 Rightscale、Salesforce、EMC、Gigaspaces、 10gen、Datastax、甲骨文、VMWare、雅虎、Cloudera、 以及数百家公司 太多了，呃，在这里提到。 所以让我们只关注，嗯，呃，AWS，呃，部分。 呃，AWS 提供多种服务； 他们最受欢迎的三项服务被称为 EC2、S3 和 EBS。 EC2 是一个弹性计算云， 提供计算服务， S3是一个简单的存储服务， 它为您提供存储数据的能力 以便您可以从世界任何地方访问它， EBS 是弹性块存储， 这本质上是卷存储 EC2 实例可以在运行时访问。

所以有两类云，呃，今天。 呃，他们要么是公共云，要么是私有云。 私有云是一种只能访问的云， 呃，特殊特权的员工或人员。 例如，如果你在 X 公司工作， 并且 X 公司有一个数据中心 或集群或云 这是可访问的 只对公司员工， 那是私有云；它不可公开访问。另一方面，呃， 公共云是任何人都可以访问的云， 世界上任何地方，只要他们有 有信用卡并愿意支付。

呃,比如说私有云,还包括,呃, 第一类还包括,呃, 您购买数据中心或云 并自己运行； 显然，那是您自己的私有云。 所以在公共云中， 那些可以公开访问的，呃，嗯， 正如我提到的，呃， 有一对，呃，相当受欢迎， 亚马逊 AWS 服务，呃，谷歌计算引擎， 而且，呃，呃，微软 Azure 往往很受欢迎。 呃，AWS 和 Azure 有很多，呃，特征， 所以我在这里只关注 AWS。 呃，S3 简单存储服务 允许您存储任意数据集， 并且您按存储的 GB 月数付费； 没有前期费用。

弹性计算云，呃，再次让你 上传和运行任意操作系统映像。 本质上它们是——这些是虚拟机， 或虚拟机，您按使用的 CPU 小时数付费。 所以如果你使用，说， 5 个虚拟机，持续 1 小时，呃，每个，同时， 你会支付，呃，5 个 CPU 小时。 同样，其他服务， 呃，AWS 或 Microsoft Azure 可能会提供，呃， 也是，呃，相应的定价。

嗯，这当然有变种。 Google AppEngine 或 Compute Engine 提供开发应用程序的能力 在，呃，他们的 AppEngine 中， 呃，然后你上传数据 将被导入到他们的格式中， 然后你运行你的应用程序。 所以例如， 您可以使用这些来托管您自己的网络服务， 你可以用这些，嗯， 托管你的，呃，数据，以便它被提供， 或者你可以托管这些来运行你自己的计算， 呃，你可能想跑。

因此，云计算对客户很有吸引力，因为， 呃，它可以让他们既节省时间又节省金钱。 呃，礼来公司，这是最大的公司之一，呃，呃， 据称，AWS 的客户， 呃，例如，呃，呃，呃，已经，呃，受益 能够相当快地启动新服务器。 早些时候他们报告说它曾经需要，呃， 七个半星期让他们部署新服务器。 这会，呃，涉及，呃，他们，呃，呃，呃，呃， 设置服务器的规格， 然后实际购买， 然后完成购买过程，呃， 服务器进来了，他们设置好了，呃， 并安装必要的操作系统和软件， 所有这一切都需要，呃，花了几个星期。 现在他们可以在，呃，大约 3 分钟内安装一个新服务器， 和一个 64 节点的 Linux 集群在 5 分钟内， 呃，虽然需要几个月，呃，更早。 这当然可以节省他们的时间；也为他们省钱，因为，呃，他们可以节省成本 否则他们可能不得不支付系统管理员的费用。

葛兰素史克报告称， 呃，他们通过迁移到云节省了大约 30%。 呃，Jim Swartz，呃，来自 CI-CIO Sybase 说， 呃，他们自 2006 年以来已经节省了 200 万美元， 这只会增加。 结果，这并不奇怪 硅谷的数百家初创公司， 呃，正在利用，呃， 我提到的一些云提供商， 以及其他各种云提供商， 而不是购买自己的机器。

但再一次，这让我们回到了这个问题 对我们来说，云到底是什么，呃，技术人员， 谁想了解的深入，详细，呃， 云计算的各个方面。 我们将在，呃，下一节课中讨论这个问题。

#### What is a cloud？

所以，我们上次留下的问题是， 

云究竟是什么？ 

当你问工业界或学术界不同的人时， 

云是什么，他们会给你非常不同的答案。 

有人会说，哦，这只是一个集群， 

一堆服务器通过网络串在一起。 

其他人可能会说，不，这是一台超级计算机。 

它比您可能在实验室中运行的简单集群更强大。 

其他人可能会说，不，它存储了大量数据， 

所以它不同于超级计算机 

因为它存储数据而不是计算事物。 

其他人可能会说，嗯，它可以做的事情比所有这些一起做的要多得多。 

他们中的一些人会，一些人 

你问会说，嗯，以上都不是。 

这是一个完全不同的野兽。 

其他人会说，以上都是。 

因此，对于云本身没有单一的定义。 

它通常不仅意味着计算和存储资源， 

还包括网络等等。 

然而，就本课程而言， 

我将提出一个非常简单的定义， 

这是一个有效的定义。 

这并不完美。这并不意味着完美。

这对我们来说已经足够好了 

了解有关现有技术的更多信息。 

所以工作定义说， 

一个云由大量的存储资源组成， 

所以你可以存储千兆字节、太字节、拍字节， 

甚至可能有更多计算周期位于附近的数据。 

请注意，这个定义不是相反的，它没有说， 

你有数据移动的计算周期。 

本质上，有这么多数据。 

我们生活在一个数据密集型的世界， 

您无法真正轻松地移动数据。 

所以，你需要让计算更接近数据 

而不是将数据靠近计算机所在的位置。 

随着我们的前进，你会看到这个主题多次出现 

在讲座和课程中。那么，什么是云？

有两种云，单站点云或 

地理分布式或地理分布式云。 

单站点云，通常称为数据中心， 

由以下组件组成，当然， 

它一直是服务器或计算节点的来源， 

这些被分组到机架中， 

一个机架作为多个服务器的单元，通常 

共享相同的电源并且经常共享机架顶部的交换机。 

这种顶部机架交换机通常通过网络拓扑连接。 

例如，树状拓扑、层次拓扑、 

最受欢迎的存在之一 

只是一个两层树，你在一层有机架的顶部， 

然后你就有了将所有机架顶部相互连接起来的核心。 

除了这些用于计算服务器的节点之外， 

机架中也有后端节点， 

但这些主要用于存储。 

这些可能是具有 SSD 的节点， 

或更大，或更多的硬盘。 

然后，有面向用户的服务器，其中 

如果是批处理系统，则客户端请求进入或用户消耗作业。 

最后，有一些软件正在运行 

这些服务器以及路由器。 

该软件包括包含用户级应用程序的操作系统。 

它包括实际的 IP 协议， 

以及交换机和路由器， 

它还包括其他路由协议。 

所以这是一个单一的数据中心。 

通常，此类数据中心位于单个建筑物中或 

就其中一些大公司而言，只有一个仓库。 

但是一家大公司也可能有多个地理分布的数据中心， 

多个，它们可能相互连接。 

所以，这些是多个站点， 

每个站点都是数据中心，这通常称为 

地理分布式或地理分布式云。 

每个站点通常具有相同的结构和服务 

至于另一个或至少就软件而言， 

它具有相同的软件堆栈。 

但这不是硬性规定， 

不同的站点可能有不同的软件堆栈。 

所以，让我举例说明一个示例云拓扑， 

我在上一张幻灯片中谈到的分层拓扑。 

您基本上拥有拓扑的服务器和叶子。 

服务器被分组到机架中。 

机架顶部有一个交换机，用于连接该机架中的所有服务器。 

然后，显然这里有多个这样的机架，我只展示两个机架， 

但可能有多个这样的机架。 

还有一个核心交换机。 

显然，所有这些， 

核心交换机和所有机架交换机在 

带宽和他们拥有的端口数量。 

因此，如果您拥有的服务器数量远多于它可以支持的内核数量， 

那么你需要扩大你的拓扑结构 

正如您在此处看到的，不仅仅是两个级别。 

但是，这仍然引出了一个问题， 

什么是集群？ 

因为这毕竟看起来像一个集群，对吧？ 

那么，云计算有什么新鲜之处呢？ 

以前在我们已经知道的集群中不存在？

#### A cloud history of time

所以我想绕道而行，讲一点历史 

云计算是如何产生的。 

云计算不是第一个分布式的，呃， 

野外系统，呃，已经存在了。 

呃,有很多,呃,几十年来。 

事实上，最初建造的几台计算机， 

包括非常有名的，呃，ENIAC， 

和其他计算机，例如 ORDVAC 和 ILLIAC， 

它们建于 1940 年代。 

这些是第一台计算机 

那些建在建筑中的， 

或我们今天所知的类似架构。 

它们实际上是数据中心； 

他们占据了整个，呃，大厅和整个大实验室。 

所以那些是在 40 年代和 50 年代。 

然后在 1960 年代和 70 年代有一个工业时代 

称为分时和数据处理行业。 

这是一个需要大量数据的行业 

很大，呃，那些时间， 

这些可能是千字节或兆字节 

并处理它们，然后给出输出。 

通常这个，呃，输入 

以打孔卡的形式给出， 

以及输出被喷出 

以，呃，打孔卡的形式。 

然后在 1980 年代 

个人电脑开始流行， 

和数据处理行业 

分时度假公司拒绝了， 

但 PC 也让构建集群变得更容易 

或工作站网络，这导致了进化 

其他计算时代，如网格计算， 

然后是非常大规模的系统 

例如 1990 年代和 2000 年代的点对点系统。 

直到现在我们才回到了一个完整的圈子 

分时和数据处理行业 

通过构建超大规模集群 

那个处理非常大量的，呃，数据。 

所以云和数据中心，我们很多人争辩说， 

事实上正在完整地回归 

到 1960 年代和 70 年代，除了规模更大 

以及与 1960 年代和 70 年代截然不同的工作负载。 

所以，呃，这是一个非常，呃，拥挤的幻灯片，显然， 

这张幻灯片上有很多细节。 

呃，我并不是要浏览幻灯片上的所有元素。 

我想指出的一件事是 

数据处理行业， 

呃，这通常被称为 

这个云计算行业的先驱， 

是一个相当大的行业， 

所以如果你看看这里的数字 

1960 年，数据处理行业为 7000 万美元。 

到 1970 年，它已变成 31.5 亿美元。 

鉴于通货膨胀率， 

呃，美元已经膨胀了多少， 

这在当时是一个相当大的行业。 

那时的球员很不一样 

我们今天拥有的参与者，在云计算中。 

呃，霍尼韦尔、IBM 和一大堆公司， 

包括施乐在内的都是大玩家。 

那个时代也造就了几台机器 

这是架构的前身 

我们的许多，呃，工作站甚至服务器，呃，今天。 

这包括，呃，DEC PDP-10， 

以及 IBM 370， 

呃那个那个时候很流行的,呃那个。 

网络和工作站， 

呃，是由个人电脑或服务器构建的，呃，包括在内 

伯克利网络或工作站项目 

还有服务器群， 

呃，在几家公司，包括在，呃，IBM。 

呃，网格在 1980 年代变得相当流行。 

这些是将多个站点连接在一起的一种方式 

网站规模不大， 

不像数据中心那么大规模， 

但足够大，网格就诞生了 

网格物理网络项目， 

也被称为 GriPhyN，呃，项目。 

1990 年代流行的点对点系统 

并在今天继续流行 

包括 Napster 和 Gnutella 的原始系统， 

我们稍后会在课程中看到， 

呃，还有 BitTorrent，也就是，呃， 

嗯，今天仍然流行。 

所有这些，我认为， 

最终形成了今天的云计算。 

所有的智慧，以及， 

所有的技术基础设施 

以及已经开发的软件协议 

使我们达到高潮并使我们成为可能 

开发，呃，我们今天所知道的云堆栈。

从 :3:36 开始播放视频并学习脚本3:36

所以有几个趋势，呃， 

在计算机科学中是众所周知的。 

呃，呃，最流行的趋势是，呃，呃，呃， 

CPU 计算能力大约每 18 个月翻一番。 

这通常被称为摩尔定律。 

这也是，嗯，嗯，嗯， 

确实，存储空间大约每 12 个月翻一番 

并且带宽大约每 9 个月翻一番。 

当我说“双打”时，我基本上是 

呃，意思是每美元你可以买 

容量的两倍。 

所以摩尔定律，它说，呃，CPU 计算能力 

或者至少，原始版本说， 

CPU计算能力翻倍，呃，每18个月一次 

说是CPU，呃，频率翻倍了 

每 18- 每 18 个月一次， 

但这已经撞到了权力墙， 

所以现在，你会发现 

CPU速度不再增加。 

相反，CPU 水平增长。 

换句话说，呃，你发现，呃，CPU的数量 

出现在你可以买到的主板上， 

市场的， 

大约每 18，呃，几个月左右翻一番。

从 :4:35 开始播放视频并学习脚本4:35

但存在显着差异 

由于这种指数增长， 

嗯，在 1980 年代和 90 年代使用的 

什么是典型的今天。 

带宽，例如， 

1985 年，全国主要由 56,000 个链接组成。 

今天，呃，我们的，呃，呃， 

互联网中的骨干链接比这快得多。 

呃，这能力， 

呃，今天的，呃，你买的个人电脑，工作站， 

甚至是笔记本电脑， 

呃，有时有数百 GB， 

在某些情况下是 TB，这是更多的存储空间 

而不是 1990 年代的超级计算机。

从 :5:9 开始播放视频并学习脚本5:09

不仅是硬件和软件， 

而且用户的期望也发生了变化。 

呃，生物学家，例如，在 1990 年， 

呃，小的单分子模拟， 

但是今天他们运行，呃，相当大的规模，呃， 

基因组测序实验。 

嗯，对你的基因组进行测序的公司 

可能会在，呃，云上运行非常大规模的作业。 

呃，大型强子对撞机，嗯，由欧洲核子研究中心运营， 

呃，还有各种其他的， 

呃，呃，呃，物理，呃，还有天文学， 

呃，应用程序和设置，呃，每年产生大量数据。 

所有这些数据都需要存储在某个地方。 

需要处理， 

a-就是这个存储和处理 

这使他们能够做出重大发现 

比如，呃，发现 

或希格斯玻色子的确认， 

引力场的确认， 

以及已经发生的各种其他进步 

因为能够存储和处理 

大量数据来自，呃，这些，呃，粒子对撞机。

从 :6:7 开始播放视频并学习脚本6:07

所以，呃，在 1960 年代做出的预言之一， 

呃，由 Fernando Corbató 和其他设计师设计 

这个叫做 Multics 的操作系统 

最终，呃，那个，嗯， 

计算将作为一种实用程序可用， 

就像电力可以作为公用事业使用一样。 

今天我们插入我们的，呃， 

设备进入墙壁，我们获得电力， 

或者你打开水龙头，你就会得到水。 

呃，同样地，他们设想计算 

只需插入即可使用，呃， 

玩你的客户端，呃，可能是一个以太网插孔。 

这么多人，呃，今天说 

那个云计算实际上已经实现了这个愿景。 

还有人说 

我们还没有实现这个愿景； 

我们已经非常接近它了。 

这是你需要考虑的事情，呃，不仅仅是现在 

而且在我们进行的整个课程中。

从 :6:53 开始播放视频并学习脚本6:53

顺便说一句，这个 Multics 操作系统 

我在这里提到的是，呃，的前身之一， 

今天的Unix操作系统。 

所以 Multics，为了公平—— 

是一个相当重量级和单体的操作系统， 

在某个时间点，呃，一群科学家坐了下来 

然后说“让我们把它缩减到最小的，呃，基本的 

并构建一个更小、更快的操作系统。” 

那个操作系统是 Unix， 

呃，操作系统，当然是前身 

对于当今许多流行的操作系统， 

包括，呃，那个，呃，Linux 版本 

例如 Ubuntu、Red Hat 等等。

#### 当今云中的新事物 four features new in today's clouds

我们现在回到什么是新的问题 

当今的云基础架构 

将云与前几代分布式计算系统区分开来。 

本质上，有四个主要特征， 

区分今天的云和他们面临的问题 

提高不同于 

前几代分布式计算系统和问题。 

它们是：大规模、按需访问、 

数据密集型性质和新的云编程范式。 

我现在会就这些中的每一个说一点，然后我们会冲洗 

这四点在本次讲座以及接下来的几场讲座中都有所体现。 

大规模本质上意味着数据中心非常大。 

它们包含数以万计， 

有时成千上万的服务器，你可以运行你的计算 

跨越任意数量的服务器，以及您的应用程序将扩展的任意数量的服务器。 

按需访问意味着您无需签订合同来预先购买资源， 

没有预先承诺。 

您只需为使用的内容付费， 

任何人都可以这样做。 

你可以用它， 

你的家人，你的妈妈， 

你的祖母，任何人都可以使用它。 

第三个方面是数据密集型性质。 

曾经是兆字节的数据已经变成了 TB 的数据。 

曾经是 PB 级的数据现在变成了 EB 级的数据。 

这是需要存储的数据，它需要被 

处理，也许需要实时提供。 

数据可能包括某些 Web 服务上发生的事情的每日日志。 

它可能包括取证， 

它可能包括网络数据， 

它可能包括大量其他数据。 

当我们谈到 TB 级等大数据时， 

PB 级、EB 级，人类有所谓的数据麻木。 

就像数字麻木一样，我们通常无法判断数据集有多大。 

例如，我们认为维基百科是 

一个非常大的数据集，但您可以将 Wikipedia 压缩到大约 10 GB。 

维基百科本身不属于大数据或数据密集型；但是，

有很多数据集， 

大得多，以拍字节和艾字节为单位。 

最后，有新的云编程范式让这一切变得更容易 

处理如此大量的数据。 

这包括 MapReduce，它是开源实现 Hadoop， 

以及存储引擎， 

这允许我们存储这些数据并相当有效地查询它。 

这包括 Cassandra 等键值存储和 MongoDB 等 NoSQL 存储， 

我们稍后会在课程中看到。 

这些新的编程范式和存储范式非常易于访问。 

它们易于编程和配置，其中许多系统都是开源的。 

本质上，我想说的是，如果有人给你一个问题并说， 

“嘿，这是一个云计算问题。” 

您可能想测试该问题是否存在， 

这张幻灯片上列出的这四个方面中的至少一个。 

如果它至少具有这些方面之一， 

这很可能是一个新的云计算问题。 

如果缺少这四个方面中的任何一个或全部， 

那么这可能是一个问题 

已经众所周知并且具有众所周知的解决方案，因此它应该让您停下来。 

云计算的第一个重要方面是大规模。 

例如，今天或至少在 2012 年的 Facebook， 

运行了大约 180,000 台服务器，并且服务器数量呈指数增长 

2009 年的 30,000 到 2010 年的 60,000 到现在的数量。 

2008 年，微软运行着 150,000 台机器，其中 80,000 台运行 Bing， 

他们的搜索引擎，那时他们正在成长 

每月 10,000 台机器的时间。 

你可以想象今天的规模。 

雅虎在 2009 年的数据中心运行着 100,000 台机器。 

由于 Hadoop 的运行方式，这些被分成 4,000 个集群。 

亚马逊网络服务在 40,000 台机器上运行 

2009 年，每台机器大约有八门课程， 

当然，这已经增长了。 

eBay 和惠普也在许多数据中心运行大量机器； 

和谷歌这个数字是未知的，但它被广泛认为是 

运行着世界上最大的机器集合之一。 

从内部看数据中心是什么样的？ 

我们将讨论在数据中心的虚拟漫步。 

这只是为了让您了解数据中心仓库的实际外观。 

有很多链接供你查看，我将把链接放上来 

在幻灯片上，这样你就可以去 

要么阅读它们，要么我将提供一些您也可以观看的 YouTube 视频。 

主要的反刍中心是， 

当然，服务器。 

从正面或背面看，它们看起来并没有太大的不同。 

它们只是普通机器，只是它们可能是机架式机器。 

在内部，它们看起来就像您的普通台式机、工作站或笔记本电脑。 

但是，其中一些可能是高度安全的。 

例如，他们可能在墙后 

如果他们存储高度敏感的财务信息。 

这些服务器和交换机的电源从何而来？ 

嗯，很多电力来自异地，例如水力发电或煤电， 

即使在今天，它仍然是数据中心的主要电源。 

一些数据中心有太阳能电池板， 

这提供了数据中心电力使用的一小部分。 

例如，在许多情况下， 

太阳能电池板可用于为数据中心内的灯供电。 

但是，有几个重要的指标用于衡量 

数据中心在用水和电力使用方面的效率。 

这些被称为用水效率或 WUE 和电力使用效率或 PUE。 

用水效率本质上是年用水量 

除以 IT 设备能源和每千瓦时升。 

这里较低的数字很好，这意味着您正在使用 

您使用的单位能量的水更少。 

PUE 是设施总功率除以 IT 设备功率， 

然后在这里，较低的数字是好的，因为， 

本质上，这意味着您使用了更大比例的 

用于为服务器、路由器和交换机供电的输入电源。 

例如，谷歌拥有世界上最低的 PUE 之一。大约是 1.11。

很明显，你永远无法达到低于 1 的 PUE， 

因为你不能使用超过 100% 的力量。 

现在，当你有力量时， 

你有服务器，你有暖气， 

所以你必须冷却这些服务器，这样你就可能会陷入困境 

空气可能来自顶部然后你需要净化水和 

将水喷到空气中，然后每个服务器组都有电机在喷水 

空气进入服务器本身，然后冷却服务器。 

这只是您可能拥有的不同冷却基础设施之一。 

其他数据中心可能使用完全不同的冷却基础设施 

比我在这张幻灯片中描述的那个。 

还有一些有趣的视频可以观看 

包括 Microsoft GFS 数据中心之旅， 

以及财富 500 强公司数据中心建设的延时摄影。 

所有这些都可以在 YouTube 上找到。

#### 云的新方面

所以我们继续讨论， 

呃，呃，云的新方面。 

我们将他们与前几代人区分开来 

分布式计算系统。 

我们在上次，呃，讲座中讨论了大规模。 

今天，我们进入第二个方面， 

这是按需访问， 

呃，我们将在这里讨论作为这个的一部分 

流行行业的aaS分类。 

所以按需访问基本上意味着 

您为所使用的东西付费 

而不是支付前期费用 

或预先购买东西。 

这有点像，嗯， 

呃，和以前租出租车相比， 

呃，租一辆车，呃，你可能需要， 

呃，为使用 ba- 支付一些前期费用 

使用他人拥有的服务器，或购买 aaa 汽车 

这基本上是类似的 - 

类似于，呃，购买你自己的，呃，数据中心。

从 ::53 开始播放视频并学习脚本0:53

相反，今天的，呃，服务允许你， 

呃，支付几美分到几美元， 

呃，每 CPU 小时， 

你可以使用任意数量的 CPU， 

根据您的应用程序需要。 

例如，这就是 AWS，呃，EC2， 

以及 Microsoft Azure 为您提供。 

或者你可以支付几美分到几美元 

您存储的每 GB 月数。 

再次，AWS 和 Azure 为您提供这些服务， 

还有各种各样的其他公司 

以有竞争力的价格为您提供类似的服务。

从 :1:19 开始播放视频并学习脚本1:19

现在在工业上经常有这样的分类 

提供的云服务， 

呃，基于，呃，服务本身的性质。 

这些通常被归类为， 

嗯，一种 aaS 分类，或“即服务”。 

所以HaaS代表“硬件即服务”。 

基本上这意味着 

您可以访问裸机硬件机器 

你可以对他们做任何你想做的事。 

例如，如果您购买自己的集群， 

您自己的私有云， 

那么，呃，你正在运行硬件即服务。 

呃，但是 

将硬件作为服务暴露给其他用户， 

尤其是那些你不信任的， 

由于涉及安全风险，这可能不是一个好主意， 

呃，给予，呃，root 访问权限，呃， 

在您的机器上发送给不受信任的用户。

从 :2: 开始播放视频并学习脚本2:00

基础设施即服务允许您获得、访问、访问、 

呃，对机器，呃，呃，安装你自己的，呃， 

操作系统和机器，但没有安全性， 

呃，呃，拥有硬件即服务。 

本质上，呃，这使用了虚拟化，所以，呃， 

你可以创建自己的虚拟机和实例， 

本质上是 AWS，呃，微软 Azure，呃， 

和其他各种玩家， 

呃，提供基础服务- 

基础设施即服务， 

这是最流行的方式之一 

使用公共云，呃，今天。

从 :2:34 开始播放视频并学习脚本2:34

通常，这被称为包含，呃，HaS，呃。 

呃，工业中的这些术语的知识 

不统一；有相互矛盾的定义，

但是，呃，你可能经常听到 IaaS，呃， 

包含硬件即服务。 

还有另外两种分类。 

平台即服务本质上是，呃，呃， 

更像是一种紧密凝结的 

或者，嗯，嗯，o-或 IaaS 的合并服务形式。 

您无法访问虚拟机，但您可以编写自己的， 

呃，你的，呃，你的代码， 

并且它与软件平台紧密集成。 

例如，Google 的 AppEngine 允许您编写代码 

在 Python、Java 或 Go 中， 

然后它自动扩展你的，呃，你的，呃， 

应用取决于传入的负载， 

但你不一定会考虑虚拟机， 

那个时间点， 

你不一定需要考虑，嗯，嗯， 

安装 VM 或配置 VM。 

很多配置都是为您完成的。 

所以它更容易，但它不太灵活

从 :3:33 开始播放视频并学习脚本3:33

比，呃，比 IaaS。 

呃，最后，软件即服务， 

基本上这个 

让您可以访问软件服务 

当您需要它们时，您再次按需付款。 

呃，这包括 Google 文档， 

相信很多人都用过 

以及 Microsoft Office on demand 和许多其他功能， 

呃，就在那里。 

呃，面向服务的架构， 

流行了几十年，通常，呃， 

据说包含在软件即服务之下， 

所以SaaS a-作为一个定义有点宽泛 

比我在这张幻灯片上谈到的 

因为它还包括 SOA 架构。

从 :4:7 开始播放视频并学习脚本4:07

云中的第三个新方面， 

呃，今天的云使它与众不同 

来自前几代分布式系统 

是我们正在处理大量数据。 

之前，虽然， 

呃，有计算密集型计算， 

比如,呃,消息传递接口, 

或基于 MPI 的计算， 

和高性能计算，您将拥有 

相对少量的数据 

但是你会在上面运行相当密集的计算， 

例如，天气建模是计算密集型的，呃， 

呃，计算，呃，这当然包括， 

呃，像 NCSA Blue Waters 这样的数据中心， 

但数据—— 

但数据密集型计算正好相反， 

存储大量数据的地方 

在数据中心， 

并且您需要使用附近的计算节点， 

仅仅因为你正在处理大量的数据， 

PB 或 TB 或 EB， 

嗯，这些计算运行 n-，呃，节点运行 

允许您处理数据的计算服务。 

所以计算密集型的转变， 

呃，计算向数据密集型计算 

是从，呃，计算到数据的转变。 

你需要更加关注数据； 

您需要使计算周期更接近数据。 

然后当你查看服务器本身时， 

CPU 利用率，这曾经是主要指标 

用于测量，呃，资源利用率 

在计算密集型，呃，云， 

不再是最重要的指标。 

相反，呃，I/O 是。 

这包括，嗯，嗯，磁盘 I/O 和网络 I/O。 

通常在数据中心，您会发现磁盘 

或者网络 I/O 接近最大化， 

而在计算密集型云中， 

呃，CPU利用率会相当高。 

再一次，这不是硬性规定。 

毕竟，数据中心只是，呃，呃， 

非常超大，呃，集群， 

因此，您可以使用它们来运行两者 

计算密集型，呃，工作以及数据密集型工作。

从 :5:49 开始播放视频并学习脚本5:49

最后，您拥有新的 pra-cloud 编程范式。 

这包括，呃，方式， 

呃，你可以在其中处理数据， 

这往往是大部分新的云编程范式， 

以及您可以存储的方式 

并查询数据，相当快。 

谷歌包括，呃，呃，诱导，呃，呃，呃，呃， 

引入了 MapReduce 以及其他引擎，如 Sawzall， 

呃，这些是开源的，呃，呃，呃， 

或者更确切地说，开源版本是由这些编写的，呃， 

通过，呃，雅虎，它变成了 Hadoop。 

后来它被开源 - 非开源， 

它现在是一个 Apache，呃，项目。 

然后它也被雅虎剥离为一家独立的公司， 

呃，截至，呃，这个日期。 

MapReduce 本身被提供为 

亚马逊上的弹性 MapReduce 服务， 

再一次，当你付钱时，呃，当你处理你的数据时， 

和 MapReduce 是有用的 

处理非常大量的数据。 

例如，呃，公司，呃，使用它，呃，到，呃，呃， 

处理作为其核心部分的大量数据， 

呃，任务。 

例如，谷歌， 

当然，谷歌以其搜索引擎而闻名， 

但为了， 

呃，在搜索引擎中向你提供结果， 

他们需要索引，呃，数据，网站， 

被他们的爬虫抓取。 

这个索引，呃，在 2006 年 

由 24 个 MapReduce 作业链完成。 

呃，它，呃，每月处理大约 50 PB 

并且使用了 200,000 个 MapReduce 作业。 

雅虎同样有一个网络地图应用程序 

这是一个由 100 个 MapReduce 作业组成的链， 

呃，处理 - 它处理了 280 TB 的数据 

在 73 小时内使用 2500 个节点。 

还有另一个引擎叫做 Pig， 

呃，也就是，呃，呃，是在 Hadoop 之上开发的。

从 :7:23 开始播放视频并学习脚本7:23

Facebook 使用 Hadoop 以及另一个名为 Hive 的引擎， 

在，呃，Hadoop 之上开发， 

呃，他们又一次在处理，呃， 

每天 55 TB，呃， 

并在 2008 年每天增加 2 TB。 

还有许多其他公司使用 

MapReduce 来处理，呃，他们的， 

嗯，他们的，呃，数据集和每日日志， 

包括像 eHarmony.com 这样的公司， 

实际上用它来做通宵运行 

他们匹配的地方，呃，彼此约会。 

本质上，这是一个 MapReduce 工作。

从 :7:51 开始播放视频并学习脚本7:51

这就是计算。 

还有新的云编程范式 

您可以在其中相当快速地存储和查询数据。 

MySQL是一个行业标准， 

但是，呃，NoSQL 和键值存储系统， 

哪些是新的云存储系统， 

是，呃，快了许多数量级， 

在我们后面的课程中，你会明白为什么。

#### 云经济学 Two categories of clouds

所以今天我们回到，呃，问题之一 

我们在系列的第一堂课中提出的 

也就是说，呃，云是省钱的。 

他们真的一直都在吗？ 

所以再一次提醒你，呃， 

当你想创办自己的，呃，服务或公司时 

你有几个选择。 

您可以使用现有的公共云， 

我们已经提到了几个这样的名字， 

或者你可以，嗯，购买和使用你自己的私有云。 

呃，这两者是有区别的， 

基本上当您使用公共云时 

你支付，呃，你使用的 CPU 小时数， 

您存储的千兆字节月数，但您没有为此付费， 

呃, 冷却电源, 啊, 管理成本 

等等等等。

从 ::50 开始播放视频并学习脚本0:50

如果您购买自己的私有云，您将支付这些费用。 

所以我们提出的问题是，呃，你是否应该外包 

还是应该拥有自己的云？ 

所以为了做到这一点 

基本上我们必须做一个成本计算 

所以让我们对一个样本做一个样本成本计算 

呃，中型数据中心 

那，呃，我们几年前最近在伊利诺伊州买的， 

但至少这意味着 

我们有它的硬件编号。 

呃，这个数据中心被称为 

云计算试验台或 CCT。 

它有 128 台服务器，总共有 24 个内核， 

每台服务器 8 个内核 

以及超过 500 TB 的数据。 

假设新公司 

你要跑 

需要那么多钱 

呃，CPU 和存储资源，好吗？ 

这就是典型的存储资源 

你需要一直运行。

从 :1:36 开始播放视频并学习脚本1:36

所以如果你外包，我们从 2009 年开始使用 AWS 成本，呃， 

然后，呃，存储，呃，呃，524 TB 

每月每 GB 使用 12 美分， 

2009年的成本，嗯，呃， 

我们使用，呃，每 CPU 小时 10 美分的 EC2 成本， 

存储成本大约是，呃，62,000 美元。 

如果添加存储和 CPU 成本 

结果是大约 136,000 美元。 

所以这是你每月支付的总额 

到 AWS 以运行，呃，这个给定大小的服务。

从 :2:9 开始播放视频并学习脚本2:09

另一方面，如果你拥有，购买你自己的私有云，呃， 

然后我们可以从发票中取出数字，呃， 

存储总成本是 349 美元，呃，千。 

由于您的服务只会运行 M 个月， 

M在这里是一个变量，每个月的成本是，呃， 

$349K 除以 M。 

总成本为 $1555K 除以 M 

这是这里的总成本，呃， 

另外你还需要支付，呃，呃，系统管理员，呃， 

这使用了行业经验法则， 

它说对于一个小的 sca- 

适用于具有 100 秒的中型数据中心 

有几百台服务器 

每 100 个节点需要一个系统管理员。 

因为大约有 128 台服务器，呃， 

我们只是一个系统管理员并使用， 

额，额，额，额，额，月率， 

呃，这只是，呃，CCT 服务所需要的。 

报价在这里 $1555K 

还包括，呃，数字 

因为，呃，权力和网络 

所以我们——我们所做的是使用发票号码， 

我当然不能在公共场合发布，呃，呃 

但我使用了发票号码 

以及，呃，那个，呃，呃，呃，呃，行业经验法则 

它说如果你为硬件支付 45 美分 

您需要为电源支付 40 美分，为网络支付 15 美分 

分三年摊销 

呃，硬件的生命周期， 

所以使用我们得到这些数字。 

所以基本上现在它变成了成本的比较，对吗？ 

所以，呃，故障分析本质上说 

拥有比外包更可取 

如果拥有成本低于外包成本 

按月计算。 

所以对于存储来说，它是 39,000 美元 

除以 M 小于 $62K。 

你可以用它来解决 M 

结果证明 M 大于 5.55 个月。 

从本质上讲，这意味着如果你看 

如果你只关注存储， 

如果您的服务将要运行 

少于 5.55 个月 

那么你想要外包并使用公共云。 

如果它要运行更长时间 

那么你想使用， 

呃，呃，呃，也许是你自己的私有云 

因为它更具成本效益。 

总体计算说 

嗯，拥有的成本低于成本 

的，呃，外包，也就是说，呃，真的 

如果你在这里解决 M， 

你发现M大于12个月，呃，总体来说。 

这再次意味着，如果您认为您的服务 

将持续一年多， 

那么它，呃，更多，呃，你买的划算 

你自己的私人，呃，数据中心， 

但如果是，呃，不到 12 个月 

那么，呃，基本上你可能想外包 

并使用公共云。 

这解释了为什么初创公司， 

不确定他们想要持续多久 

而且，呃，也不确定有多少竞争 

而且，呃，他们将要使用的存储资源 

更喜欢外包和使用公共云 

在他们的头几个月，甚至头几年。

从 :4:48 开始播放视频并学习脚本4:48

后来当，呃，当它凝结时，它们可能会移动 

购买自己的私有云， 

另一方面，他们可能不会 

因为他们已经建立了基础设施 

在一个众所周知的公共云上，它可以工作，呃， 

客户，呃，用户已经去那里了 

所以他们可能不想改变它。 

呃，所以 AW- 所以，呃，你知道，嗯， 

呃，像 AWS 和微软这样的公司，NetZero 

而且，呃，谷歌计算设计了这些服务， 

呃，他们基本上，呃，能够，呃，从你那里受益 

在那些，呃，软件基础设施上构建堆栈 

然后坚持下去。 

还有这些，呃，云提供商从存储中受益很多，呃， 

正如你所注意到的，呃，存储的盈亏平衡点 

远小于盈亏平衡点 

为了，呃，为了，呃，总体，呃，成本 

这意味着，嗯，那个，呃，存储 

最有利于云提供商 

但本质上你是在那里存储数据 

它只是坐在那里，即使它可能不会被使用 

你会在你 - 你会支付每 GB 月。

从 :5:45 开始播放视频并学习脚本5:45

所以我想结束我们的讨论 

云计算简介。 

云，一，计算不是，一， 

还没有，呃，突然被收购 

它是，呃，许多前几代人的结晶 

分布式系统 

它建立在技术知识和智慧之上 

这些前几代。 

呃...这是一个回到完整的分时循环 

和数据处理行业 

存在于 1960 年代和 70 年代 

除了更大的规模，不同类型的工作负载 

以及更多的用户和客户。 

当有人给你一个问题，呃，他们说 

是一个云计算问题，本质上我们检查 

问题是否具有这些特征中的一个或多个； 

大规模， 

按需访问， 

数据密集型 

或涉及新的编程范式。 

如果没有这些啊啊啊方面 

那么这可能不是一个新问题 

这可能是一个已经解决的问题 

与众所周知的解决方案。 

如果它具有这些方面之一， 

呃，至少这些方面之一 

那么它可能是一个新问题 

而且，呃，呃，也许有一个新的解决方案 

或者 - 也许您可以为它构建一个新的解决方案。 

所以对我们来说，嗯，检查云计算问题很重要 

反对这些，呃，四个标准。